<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì«€ì«€ì´ ì´ë¯¸ì§€ ì••ì¶•ê¸°</title>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NJJT1Y22HZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NJJT1Y22HZ');
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #fef7f2;
      color: #333;
      text-align: center;
      padding: 30px;
    }
    .logo {
      font-size: 2.5em;
    }
    .highlight {
      color: #ff6600;
      font-weight: bold;
    }
    .description {
      margin-top: 10px;
      font-size: 1.05em;
      line-height: 1.5em;
    }
    .upload-box {
      background: #ffa500;
      display: inline-block;
      padding: 10px 20px;
      border-radius: 6px;
      margin-top: 20px;
      color: white;
      font-weight: bold;
    }
    input[type="file"] {
      display: inline-block;
      margin-right: 10px;
    }
    .note {
      font-size: 0.9em;
      color: #555;
      margin-top: 15px;
    }
    .btn {
      margin-top: 15px;
      padding: 12px 20px;
      font-size: 1em;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      min-width: 260px;
    }
    .btn-orange {
      background-color: #ff6600;
      color: white;
    }
    .btn-blue {
      background-color: #3388cc;
      color: white;
    }
    .result-box {
      margin-top: 20px;
      padding: 15px;
      background: #fff3cd;
      border-radius: 6px;
      display: none;
      font-size: 0.95em;
      font-weight: bold;
    }
    .share-btn {
      background-color: #000;
      color: #fff;
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      margin-top: 10px;
      cursor: pointer;
    }
    .button-group {
      margin-top: 20px;
    }
    .format-description {
      font-size: 0.85em;
      margin-top: 5px;
      color: #444;
    }
  </style>
</head>
<body>

  <div class="logo">ğŸ° <span class="highlight">ì«€ì«€ì´</span> ì´ë¯¸ì§€ ì••ì¶•ê¸°</div>
  <div class="description">
    ë¸”ë¡œê·¸ ì†ë„, ì«€ì«€ì´ë¡œ 1ì´ˆ ë§Œì— ì¤„ì´ì!<br>
    ì‚¬ì§„ í•œ ì¥ë„, ì«€ì«€ì´ê°€ ë‹¤ì´ì–´íŠ¸ ì‹œì¼œì¤„ê²Œìš” ğŸ‘
  </div>

  <div class="upload-box">
    <label for="imageInput">íŒŒì¼ ì„ íƒ</label>
    <input type="file" id="imageInput" accept="image/*" multiple>
    <span id="fileCount">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span>
  </div>

  <div style="margin-top: 15px;">
    ì €ì¥ í¬ë§·:
    <select id="formatSelect">
      <option value="image/jpeg">JPEG (ê¸°ë³¸ ì¶”ì²œ)</option>
      <option value="image/webp">WebP (íˆ¬ëª… ë°°ê²½ ìœ ì§€)</option>
    </select>
    <div class="format-description" id="formatDesc">
      JPEGëŠ” ëª¨ë“  í™˜ê²½ì—ì„œ í˜¸í™˜ë˜ê³ , ì••ì¶•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤.
    </div>
  </div>

  <div class="note">
    âš  ëª¨ë“  ì••ì¶•ì€ ì‚¬ìš©ìì˜ ê¸°ê¸°ì—ì„œë§Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.<br>
    ì«€ì«€ì´ëŠ” ì–´ë–¤ ì´ë¯¸ì§€ë„ ì €ì¥í•˜ì§€ ì•Šì•„ìš”.
  </div>

  <!-- ì••ì¶• ì™„ë£Œ ë©”ì‹œì§€ -->
  <div id="completeMessage" class="result-box">âœ… ì••ì¶•ëœ ZIP ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>

  <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
  <div id="downloadWrapper" class="button-group" style="display:none;">
    <button class="btn btn-orange" id="downloadBtn" onclick="downloadZip()">
      ğŸ“¦ ì••ì¶•ëœ ì´ë¯¸ì§€ ZIP ë‹¤ìš´ë¡œë“œ
    </button>
  </div>

  <!-- ìš´ì„¸ ë²„íŠ¼ì€ í•­ìƒ ì•„ë˜ ê³ ì • -->
  <div class="button-group">
    <button class="btn btn-blue" onclick="showFortune()">ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë³´ê¸°</button>
  </div>

  <div class="result-box" id="fortuneResult">
    <div id="fortuneText"></div>
    <button class="share-btn" onclick="shareToX()">X (íŠ¸ìœ„í„°)ì— ê³µìœ í•˜ê¸°</button>
  </div>

  <script>
    const input = document.getElementById("imageInput");
    const fileCount = document.getElementById("fileCount");
    const downloadBtn = document.getElementById("downloadBtn");
    const downloadWrapper = document.getElementById("downloadWrapper");
    const completeMessage = document.getElementById("completeMessage");
    const formatSelect = document.getElementById("formatSelect");
    const formatDesc = document.getElementById("formatDesc");

    let selectedFiles = [];

    input.addEventListener("change", function () {
      selectedFiles = Array.from(input.files);
      const count = selectedFiles.length;
      fileCount.innerText = count === 0 ? "ì„ íƒëœ íŒŒì¼ ì—†ìŒ" : `íŒŒì¼ ${count}ê°œ ì„ íƒë¨`;

      // ìƒíƒœ ì´ˆê¸°í™”
      completeMessage.style.display = "none";
      downloadWrapper.style.display = count > 0 ? "block" : "none";
    });

    formatSelect.addEventListener("change", function () {
      const value = formatSelect.value;
      formatDesc.innerText = value === "image/webp"
        ? "WebPë¥¼ ì„ íƒí•˜ë©´ PNGì˜ íˆ¬ëª… ë°°ê²½ë„ ìœ ì§€ë˜ë©°, ê³ íš¨ìœ¨ ì••ì¶•ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."
        : "JPEGëŠ” ëª¨ë“  í™˜ê²½ì—ì„œ í˜¸í™˜ë˜ê³ , ì••ì¶•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤.";
    });

    function loadImage(file) {
      return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = () => {
          const img = new Image();
          img.onload = () => resolve(img);
          img.src = reader.result;
        };
        reader.readAsDataURL(file);
      });
    }

    function resizeImage(img, maxWidth, outputType, quality = 0.7) {
      return new Promise((resolve) => {
        const canvas = document.createElement("canvas");
        const scale = Math.min(1, maxWidth / img.width);
        canvas.width = img.width * scale;
        canvas.height = img.height * scale;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        canvas.toBlob((blob) => resolve(blob), outputType, quality);
      });
    }

    async function downloadZip() {
      if (selectedFiles.length === 0) return;
      const outputType = formatSelect.value;
      const zip = new JSZip();

      for (const file of selectedFiles) {
        const img = await loadImage(file);
        const extension = outputType.split("/")[1];
        const filename = file.name.replace(/\.[^/.]+$/, "") + `_compressed.${extension}`;
        const resizedBlob = await resizeImage(img, 1024, outputType);
        zip.file(filename, resizedBlob);
      }

      const blob = await zip.generateAsync({ type: "blob" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "compressed_images.zip";
      document.body.appendChild(a);
      a.click();
      a.remove();

      // ë©”ì‹œì§€ í‘œì‹œ & ë²„íŠ¼ ì œê±°
      completeMessage.style.display = "block";
      downloadWrapper.style.display = "none";
    }

    const fortunes = [
      { grade: "ğŸ’®", text: "ë†“ì³¤ë˜ ê¸°íšŒê°€ ë‹¤ì‹œ ì°¾ì•„ì˜¬ ê±°ì˜ˆìš”!" },
      { grade: "ğŸ’®", text: "ì˜¤ëŠ˜ì€ ê·€ì¸ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ëˆˆì„ í¬ê²Œ ëœ¨ê³  ë³´ì„¸ìš”!" },
      { grade: "ğŸ’®", text: "í–‰ìš´ì˜ ìˆœê°„ì´ ê³§ ë‹¤ê°€ì˜µë‹ˆë‹¤." },
      { grade: "ğŸŒ•", text: "ë¬´ë‚œí•œ í•˜ë£¨ì§€ë§Œ, ë¬´ì–¸ê°€ ë°°ìš°ëŠ” ë‚ ì´ ë  ê±°ì˜ˆìš”." },
      { grade: "ğŸŒ•", text: "ì‘ì€ ì„±ì·¨ê°€ ìŒ“ì´ë©´ í° ì„±ê³¼ê°€ ë©ë‹ˆë‹¤." },
      { grade: "ğŸŒ•", text: "ì˜ì™¸ì˜ ê³³ì—ì„œ ì¢‹ì€ ì†Œì‹ì´ ë“¤ë¦´ì§€ë„ ëª°ë¼ìš”." },
      { grade: "ğŸŒ‘", text: "ì˜¤ëŠ˜ì€ íœ´ì‹ì´ í•„ìš”í•´ìš”. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”." },
      { grade: "ğŸŒ‘", text: "ì¡°ê¸ˆ ëŠë¦¬ë”ë¼ë„ ê´œì°®ì•„ìš”. ë‚˜ë§Œì˜ ì†ë„ë¥¼ ì§€ì¼œìš”." },
      { grade: "ğŸŒ‘", text: "ìƒê°ë³´ë‹¤ ê²°ê³¼ê°€ ëŠ¦ì„ ìˆ˜ ìˆì–´ìš”. ê¸°ë‹¤ë¦¼ë„ ìš©ê¸°ì˜ˆìš”." }
    ];

    let fortuneShown = false;

    function showFortune() {
      if (fortuneShown) return;
      fortuneShown = true;
      const pick = fortunes[Math.floor(Math.random() * fortunes.length)];
      document.getElementById("fortuneText").innerText = `${pick.grade} ${pick.text}`;
      document.getElementById("fortuneResult").style.display = "block";
    }

    function shareToX() {
      const text = document.getElementById("fortuneText").innerText;
      const url = encodeURIComponent("https://your-site-link.com");
      const tweetText = encodeURIComponent("[ì«€ì«€ì´ ì˜¤ëŠ˜ì˜ ìš´ì„¸] " + text);
      window.open(`https://twitter.com/intent/tweet?text=${tweetText}&url=${url}`, '_blank');
    }
  </script>
<!-- ğŸ§¡ ì«€ì«€ì´ ì¶”ì²œí…œ -->
<div style="margin-top: 40px; padding: 20px; background: #fff9f0; border: 2px dashed #ffa500; border-radius: 10px; max-width: 600px; margin-left: auto; margin-right: auto; font-family: 'Noto Sans KR', sans-serif;">
  <h3 style="font-size: 1.3em; color: #ff6600; margin-bottom: 15px;">ğŸ§¡ ì«€ì«€ì´ê°€ ëª°ë˜ ì•„ê»´ë‘” ê¿€í…œ</h3>

  <p style="margin-bottom: 12px;">
    ğŸ’¡ <strong>ë¬´ë“œë“±</strong><br>
    <a href="https://link.coupang.com/a/cormpt" target="_blank" style="color: #3388cc; text-decoration: underline;">
      ì«€ì«€ì´ë‘ ë°¤ìƒ˜ì‘ì—… ê°ì„± ON ğŸŒ™
    </a>
  </p>

  <p style="margin-bottom: 12px;">
    ğŸ§ <strong>ë…¸ì´ì¦ˆìº”ìŠ¬ë§ ì´ì–´í°</strong><br>
    <a href="https://link.coupang.com/a/corno8" target="_blank" style="color: #3388cc; text-decoration: underline;">
      ì••ì¶•í•˜ë©´ì„œ ë”´ ì„¸ìƒ ê°€ê¸° ê°€ëŠ¥ ğŸ˜Œ
    </a>
  </p>

  <p style="margin-bottom: 0;">
    ğŸ¨ <strong>ì»¬ëŸ¬ ì°¨íŠ¸ë¶</strong><br>
    <a href="https://link.coupang.com/a/cornyb" target="_blank" style="color: #3388cc; text-decoration: underline;">
      ë°°ìƒ‰ ê³ ë¥¼ ë•Œ, ë‚˜ë§Œ ì—†ì–´ ìƒ‰ê° ê°ê°...? ê·¸ëŸ´ ë• ìš”ê±°!
    </a>
  </p>
</div>
<!-- ğŸ§¡ /ì«€ì«€ì´ ì¶”ì²œí…œ -->

</body>
</html>
